{"ast":null,"code":"import _slicedToArray from\"/Users/zeta/Documents/XXX/Languages/ionic/daily-moments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonContent,IonFab,IonFabButton,IonHeader,IonIcon,IonItem,IonLabel,IonList,IonPage,IonTitle,IonToolbar,IonThumbnail,IonImg}from'@ionic/react';import{add as addIcon}from'ionicons/icons';import React,{useState,useEffect}from'react';import{useAuth}from'../auth';import{formatDate}from'../date';import{firestore}from'../firebase';import{toEntry}from'../models';var HomePage=function HomePage(){var _useAuth=useAuth(),userId=_useAuth.userId;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),entries=_useState2[0],setEntries=_useState2[1];useEffect(function(){var entriesRef=firestore.collection('users').doc(userId).collection('entries');return entriesRef.orderBy('date','desc').limit(7).onSnapshot(function(_ref){var docs=_ref.docs;return setEntries(docs.map(toEntry));});},[userId]);return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonTitle,null,\"Home\"))),/*#__PURE__*/React.createElement(IonContent,{className:\"ion-padding\"},/*#__PURE__*/React.createElement(IonList,null,entries.map(function(entry){return/*#__PURE__*/React.createElement(IonItem,{button:true,key:entry.id,routerLink:\"/my/entries/view/\".concat(entry.id)},/*#__PURE__*/React.createElement(IonThumbnail,{slot:\"end\"},/*#__PURE__*/React.createElement(IonImg,{src:entry.pictureUrl})),/*#__PURE__*/React.createElement(IonLabel,null,/*#__PURE__*/React.createElement(\"h2\",null,formatDate(entry.date)),/*#__PURE__*/React.createElement(\"h3\",null,entry.title)));})),/*#__PURE__*/React.createElement(IonFab,{vertical:\"bottom\",horizontal:\"end\"},/*#__PURE__*/React.createElement(IonFabButton,{routerLink:\"/my/entries/add\"},/*#__PURE__*/React.createElement(IonIcon,{icon:addIcon})))));};export default HomePage;","map":{"version":3,"sources":["/Users/zeta/Documents/XXX/Languages/ionic/daily-moments/src/pages/HomePage.tsx"],"names":["IonContent","IonFab","IonFabButton","IonHeader","IonIcon","IonItem","IonLabel","IonList","IonPage","IonTitle","IonToolbar","IonThumbnail","IonImg","add","addIcon","React","useState","useEffect","useAuth","formatDate","firestore","toEntry","HomePage","userId","entries","setEntries","entriesRef","collection","doc","orderBy","limit","onSnapshot","docs","map","entry","id","pictureUrl","date","title"],"mappings":"8KAAA,OACEA,UADF,CAEEC,MAFF,CAGEC,YAHF,CAIEC,SAJF,CAKEC,OALF,CAMEC,OANF,CAOEC,QAPF,CAQEC,OARF,CASEC,OATF,CAUEC,QAVF,CAWEC,UAXF,CAYEC,YAZF,CAaEC,MAbF,KAcO,cAdP,CAeA,OAASC,GAAG,GAAIC,CAAAA,OAAhB,KAA+B,gBAA/B,CACA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,OAASC,UAAT,KAA2B,SAA3B,CACA,OAASC,SAAT,KAA0B,aAA1B,CACA,OAAgBC,OAAhB,KAA+B,WAA/B,CAEA,GAAMC,CAAAA,QAAkB,CAAG,QAArBA,CAAAA,QAAqB,EAAM,cACZJ,OAAO,EADK,CACvBK,MADuB,UACvBA,MADuB,eAEDP,QAAQ,CAAU,EAAV,CAFP,wCAExBQ,OAFwB,eAEfC,UAFe,eAG/BR,SAAS,CAAC,UAAM,CACd,GAAMS,CAAAA,UAAU,CAAGN,SAAS,CAACO,UAAV,CAAqB,OAArB,EAA8BC,GAA9B,CAAkCL,MAAlC,EAChBI,UADgB,CACL,SADK,CAAnB,CAEA,MAAOD,CAAAA,UAAU,CAACG,OAAX,CAAmB,MAAnB,CAA2B,MAA3B,EAAmCC,KAAnC,CAAyC,CAAzC,EACJC,UADI,CACO,kBAAGC,CAAAA,IAAH,MAAGA,IAAH,OAAcP,CAAAA,UAAU,CAACO,IAAI,CAACC,GAAL,CAASZ,OAAT,CAAD,CAAxB,EADP,CAAP,CAED,CALQ,CAKN,CAACE,MAAD,CALM,CAAT,CAMA,mBACE,oBAAC,OAAD,mBACE,oBAAC,SAAD,mBACE,oBAAC,UAAD,mBACE,oBAAC,QAAD,aADF,CADF,CADF,cAME,oBAAC,UAAD,EAAY,SAAS,CAAC,aAAtB,eACE,oBAAC,OAAD,MACGC,OAAO,CAACS,GAAR,CAAY,SAACC,KAAD,qBACX,oBAAC,OAAD,EAAS,MAAM,KAAf,CAAgB,GAAG,CAAEA,KAAK,CAACC,EAA3B,CACE,UAAU,4BAAsBD,KAAK,CAACC,EAA5B,CADZ,eAEE,oBAAC,YAAD,EAAc,IAAI,CAAC,KAAnB,eACE,oBAAC,MAAD,EAAQ,GAAG,CAAED,KAAK,CAACE,UAAnB,EADF,CAFF,cAKE,oBAAC,QAAD,mBACE,8BAAKjB,UAAU,CAACe,KAAK,CAACG,IAAP,CAAf,CADF,cAEE,8BAAKH,KAAK,CAACI,KAAX,CAFF,CALF,CADW,EAAZ,CADH,CADF,cAeE,oBAAC,MAAD,EAAQ,QAAQ,CAAC,QAAjB,CAA0B,UAAU,CAAC,KAArC,eACE,oBAAC,YAAD,EAAc,UAAU,CAAC,iBAAzB,eACE,oBAAC,OAAD,EAAS,IAAI,CAAExB,OAAf,EADF,CADF,CAfF,CANF,CADF,CA8BD,CAvCD,CAyCA,cAAeQ,CAAAA,QAAf","sourcesContent":["import {\n  IonContent,\n  IonFab,\n  IonFabButton,\n  IonHeader,\n  IonIcon,\n  IonItem,\n  IonLabel,\n  IonList,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonThumbnail,\n  IonImg,\n} from '@ionic/react';\nimport { add as addIcon } from 'ionicons/icons';\nimport React, { useState, useEffect } from 'react';\nimport { useAuth } from '../auth';\nimport { formatDate } from '../date';\nimport { firestore } from '../firebase';\nimport { Entry, toEntry } from '../models';\n\nconst HomePage: React.FC = () => {\n  const { userId } = useAuth();\n  const [entries, setEntries] = useState<Entry[]>([]);\n  useEffect(() => {\n    const entriesRef = firestore.collection('users').doc(userId)\n      .collection('entries');\n    return entriesRef.orderBy('date', 'desc').limit(7)\n      .onSnapshot(({ docs }) => setEntries(docs.map(toEntry)))\n  }, [userId]);\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Home</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"ion-padding\">\n        <IonList>\n          {entries.map((entry) =>\n            <IonItem button key={entry.id}\n              routerLink={`/my/entries/view/${entry.id}`}>\n              <IonThumbnail slot=\"end\">\n                <IonImg src={entry.pictureUrl} />\n              </IonThumbnail>\n              <IonLabel>\n                <h2>{formatDate(entry.date)}</h2>\n                <h3>{entry.title}</h3>\n              </IonLabel>\n            </IonItem>\n          )}\n        </IonList>\n        <IonFab vertical=\"bottom\" horizontal=\"end\">\n          <IonFabButton routerLink=\"/my/entries/add\">\n            <IonIcon icon={addIcon} />\n          </IonFabButton>\n        </IonFab>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}