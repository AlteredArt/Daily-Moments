{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zeta/Documents/XXX/Languages/ionic/daily-moments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/zeta/Documents/XXX/Languages/ionic/daily-moments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/zeta/Documents/XXX/Languages/ionic/daily-moments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonButton,IonContent,IonHeader,IonInput,IonItem,IonLabel,IonList,IonLoading,IonPage,IonText,IonTitle,IonToolbar}from'@ionic/react';import React,{useState}from'react';import{Redirect}from'react-router';import{useAuth}from'../auth';import{auth}from'../firebase';var LoginPage=function LoginPage(){var _useAuth=useAuth(),loggedIn=_useAuth.loggedIn;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState({loading:false,error:false}),_useState6=_slicedToArray(_useState5,2),status=_useState6[0],setStatus=_useState6[1];var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var credential;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setStatus({loading:true,error:false});_context.next=4;return auth.signInWithEmailAndPassword(email,password);case 4:credential=_context.sent;console.log('credential:',credential);_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);setStatus({loading:false,error:true});console.log('error:',_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function handleLogin(){return _ref.apply(this,arguments);};}();if(loggedIn){return/*#__PURE__*/React.createElement(Redirect,{to:\"/my/entries\"});}return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonTitle,null,\"Login\"))),/*#__PURE__*/React.createElement(IonContent,{className:\"ion-padding\"},/*#__PURE__*/React.createElement(IonList,null,/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\"},\"Email\"),/*#__PURE__*/React.createElement(IonInput,{type:\"email\",value:email,onIonChange:function onIonChange(event){return setEmail(event.detail.value);}})),/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\"},\"Password\"),/*#__PURE__*/React.createElement(IonInput,{type:\"password\",value:password,onIonChange:function onIonChange(event){return setPassword(event.detail.value);}}))),status.error&&/*#__PURE__*/React.createElement(IonText,{color:\"danger\"},\"Invalid credentials\"),/*#__PURE__*/React.createElement(IonButton,{expand:\"block\",onClick:handleLogin},\"Login\"),/*#__PURE__*/React.createElement(IonButton,{expand:\"block\",fill:\"clear\",routerLink:\"/register\"},\"Don't have an account?\"),/*#__PURE__*/React.createElement(IonLoading,{isOpen:status.loading})));};export default LoginPage;","map":{"version":3,"sources":["/Users/zeta/Documents/XXX/Languages/ionic/daily-moments/src/pages/LoginPage.tsx"],"names":["IonButton","IonContent","IonHeader","IonInput","IonItem","IonLabel","IonList","IonLoading","IonPage","IonText","IonTitle","IonToolbar","React","useState","Redirect","useAuth","auth","LoginPage","loggedIn","email","setEmail","password","setPassword","loading","error","status","setStatus","handleLogin","signInWithEmailAndPassword","credential","console","log","event","detail","value"],"mappings":"ugBAAA,OACEA,SADF,CAEEC,UAFF,CAGEC,SAHF,CAIEC,QAJF,CAKEC,OALF,CAMEC,QANF,CAOEC,OAPF,CAQEC,UARF,CASEC,OATF,CAUEC,OAVF,CAWEC,QAXF,CAYEC,UAZF,KAaO,cAbP,CAcA,MAAOC,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,KAAyB,cAAzB,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,OAASC,IAAT,KAAqB,aAArB,CAEA,GAAMC,CAAAA,SAAmB,CAAG,QAAtBA,CAAAA,SAAsB,EAAM,cACXF,OAAO,EADI,CACxBG,QADwB,UACxBA,QADwB,eAENL,QAAQ,CAAC,EAAD,CAFF,wCAEzBM,KAFyB,eAElBC,QAFkB,8BAGAP,QAAQ,CAAC,EAAD,CAHR,yCAGzBQ,QAHyB,eAGfC,WAHe,8BAIJT,QAAQ,CAAC,CAAEU,OAAO,CAAE,KAAX,CAAkBC,KAAK,CAAE,KAAzB,CAAD,CAJJ,yCAIzBC,MAJyB,eAIjBC,SAJiB,eAMhC,GAAMC,CAAAA,WAAW,0FAAG,kKAEhBD,SAAS,CAAC,CAAEH,OAAO,CAAE,IAAX,CAAiBC,KAAK,CAAE,KAAxB,CAAD,CAAT,CAFgB,sBAGSR,CAAAA,IAAI,CAACY,0BAAL,CAAgCT,KAAhC,CAAuCE,QAAvC,CAHT,QAGVQ,UAHU,eAIhBC,OAAO,CAACC,GAAR,CAAY,aAAZ,CAA2BF,UAA3B,EAJgB,+EAMhBH,SAAS,CAAC,CAAEH,OAAO,CAAE,KAAX,CAAkBC,KAAK,CAAE,IAAzB,CAAD,CAAT,CACAM,OAAO,CAACC,GAAR,CAAY,QAAZ,cAPgB,oEAAH,kBAAXJ,CAAAA,WAAW,0CAAjB,CAWA,GAAIT,QAAJ,CAAc,CACZ,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAC,aAAb,EAAP,CACD,CACD,mBACE,oBAAC,OAAD,mBACE,oBAAC,SAAD,mBACE,oBAAC,UAAD,mBACE,oBAAC,QAAD,cADF,CADF,CADF,cAME,oBAAC,UAAD,EAAY,SAAS,CAAC,aAAtB,eACE,oBAAC,OAAD,mBACE,oBAAC,OAAD,mBACE,oBAAC,QAAD,EAAU,QAAQ,CAAC,SAAnB,UADF,cAEE,oBAAC,QAAD,EAAU,IAAI,CAAC,OAAf,CAAuB,KAAK,CAAEC,KAA9B,CACE,WAAW,CAAE,qBAACa,KAAD,QAAWZ,CAAAA,QAAQ,CAACY,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAnB,EADf,EAFF,CADF,cAOE,oBAAC,OAAD,mBACE,oBAAC,QAAD,EAAU,QAAQ,CAAC,SAAnB,aADF,cAEE,oBAAC,QAAD,EAAU,IAAI,CAAC,UAAf,CAA0B,KAAK,CAAEb,QAAjC,CACE,WAAW,CAAE,qBAACW,KAAD,QAAWV,CAAAA,WAAW,CAACU,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAtB,EADf,EAFF,CAPF,CADF,CAeGT,MAAM,CAACD,KAAP,eACC,oBAAC,OAAD,EAAS,KAAK,CAAC,QAAf,wBAhBJ,cAkBE,oBAAC,SAAD,EAAW,MAAM,CAAC,OAAlB,CAA0B,OAAO,CAAEG,WAAnC,UAlBF,cAmBE,oBAAC,SAAD,EAAW,MAAM,CAAC,OAAlB,CAA0B,IAAI,CAAC,OAA/B,CAAuC,UAAU,CAAC,WAAlD,2BAnBF,cAsBE,oBAAC,UAAD,EAAY,MAAM,CAAEF,MAAM,CAACF,OAA3B,EAtBF,CANF,CADF,CAiCD,CArDD,CAuDA,cAAeN,CAAAA,SAAf","sourcesContent":["import {\n  IonButton,\n  IonContent,\n  IonHeader,\n  IonInput,\n  IonItem,\n  IonLabel,\n  IonList,\n  IonLoading,\n  IonPage,\n  IonText,\n  IonTitle,\n  IonToolbar,\n} from '@ionic/react';\nimport React, { useState } from 'react';\nimport { Redirect } from 'react-router';\nimport { useAuth } from '../auth';\nimport { auth } from '../firebase';\n\nconst LoginPage: React.FC = () => {\n  const { loggedIn } = useAuth();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [status, setStatus] = useState({ loading: false, error: false });\n\n  const handleLogin = async () => {\n    try {\n      setStatus({ loading: true, error: false });\n      const credential = await auth.signInWithEmailAndPassword(email, password);\n      console.log('credential:', credential);\n    } catch (error) {\n      setStatus({ loading: false, error: true });\n      console.log('error:', error);\n    }\n  };\n\n  if (loggedIn) {\n    return <Redirect to=\"/my/entries\" />;\n  }\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonTitle>Login</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"ion-padding\">\n        <IonList>\n          <IonItem>\n            <IonLabel position=\"stacked\">Email</IonLabel>\n            <IonInput type=\"email\" value={email}\n              onIonChange={(event) => setEmail(event.detail.value)}\n            />\n          </IonItem>\n          <IonItem>\n            <IonLabel position=\"stacked\">Password</IonLabel>\n            <IonInput type=\"password\" value={password}\n              onIonChange={(event) => setPassword(event.detail.value)}\n            />\n          </IonItem>\n        </IonList>\n        {status.error &&\n          <IonText color=\"danger\">Invalid credentials</IonText>\n        }\n        <IonButton expand=\"block\" onClick={handleLogin}>Login</IonButton>\n        <IonButton expand=\"block\" fill=\"clear\" routerLink=\"/register\">\n          Don't have an account?\n        </IonButton>\n        <IonLoading isOpen={status.loading} />\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}