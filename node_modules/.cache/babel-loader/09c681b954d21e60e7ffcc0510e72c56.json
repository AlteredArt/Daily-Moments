{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zeta/Documents/XXX/Languages/ionic/daily-moments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/zeta/Documents/XXX/Languages/ionic/daily-moments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/zeta/Documents/XXX/Languages/ionic/daily-moments/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{IonBackButton,IonButton,IonButtons,IonContent,IonHeader,IonIcon,IonPage,IonTitle,IonToolbar}from'@ionic/react';import{trash as trashIcon}from'ionicons/icons';import React,{useEffect,useState}from'react';import{useHistory,useParams}from'react-router';import{useAuth}from'../auth';import{formatDate}from'../date';import{firestore}from'../firebase';import{toEntry}from'../models';var EntryPage=function EntryPage(){var _useAuth=useAuth(),userId=_useAuth.userId;var history=useHistory();var _useParams=useParams(),id=_useParams.id;var _useState=useState(),_useState2=_slicedToArray(_useState,2),entry=_useState2[0],setEntry=_useState2[1];useEffect(function(){var entryRef=firestore.collection('users').doc(userId).collection('entries').doc(id);entryRef.get().then(function(doc){return setEntry(toEntry(doc));});},[userId,id]);var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var entryRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:entryRef=firestore.collection('users').doc(userId).collection('entries').doc(id);_context.next=3;return entryRef.delete();case 3:history.goBack();case 4:case\"end\":return _context.stop();}}},_callee);}));return function handleDelete(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(IonPage,null,/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonButtons,{slot:\"start\"},/*#__PURE__*/React.createElement(IonBackButton,null)),/*#__PURE__*/React.createElement(IonTitle,null,formatDate(entry===null||entry===void 0?void 0:entry.date)),/*#__PURE__*/React.createElement(IonButtons,{slot:\"end\"},/*#__PURE__*/React.createElement(IonButton,{onClick:handleDelete},/*#__PURE__*/React.createElement(IonIcon,{icon:trashIcon,slot:\"icon-only\"}))))),/*#__PURE__*/React.createElement(IonContent,{className:\"ion-padding\"},/*#__PURE__*/React.createElement(\"h2\",null,entry===null||entry===void 0?void 0:entry.title),/*#__PURE__*/React.createElement(\"img\",{src:entry===null||entry===void 0?void 0:entry.pictureUrl,alt:entry===null||entry===void 0?void 0:entry.title}),/*#__PURE__*/React.createElement(\"p\",null,entry===null||entry===void 0?void 0:entry.description)));};export default EntryPage;","map":{"version":3,"sources":["/Users/zeta/Documents/XXX/Languages/ionic/daily-moments/src/pages/EntryPage.tsx"],"names":["IonBackButton","IonButton","IonButtons","IonContent","IonHeader","IonIcon","IonPage","IonTitle","IonToolbar","trash","trashIcon","React","useEffect","useState","useHistory","useParams","useAuth","formatDate","firestore","toEntry","EntryPage","userId","history","id","entry","setEntry","entryRef","collection","doc","get","then","handleDelete","delete","goBack","date","title","pictureUrl","description"],"mappings":"ugBAAA,OACEA,aADF,CAEEC,SAFF,CAGEC,UAHF,CAIEC,UAJF,CAKEC,SALF,CAMEC,OANF,CAOEC,OAPF,CAQEC,QARF,CASEC,UATF,KAUO,cAVP,CAWA,OAASC,KAAK,GAAIC,CAAAA,SAAlB,KAAmC,gBAAnC,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,UAAT,CAAqBC,SAArB,KAAsC,cAAtC,CACA,OAASC,OAAT,KAAwB,SAAxB,CACA,OAASC,UAAT,KAA2B,SAA3B,CACA,OAASC,SAAT,KAA0B,aAA1B,CACA,OAAgBC,OAAhB,KAA+B,WAA/B,CAMA,GAAMC,CAAAA,SAAmB,CAAG,QAAtBA,CAAAA,SAAsB,EAAM,cACbJ,OAAO,EADM,CACxBK,MADwB,UACxBA,MADwB,CAEhC,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CAFgC,eAGjBC,SAAS,EAHQ,CAGxBQ,EAHwB,YAGxBA,EAHwB,eAINV,QAAQ,EAJF,wCAIzBW,KAJyB,eAIlBC,QAJkB,eAKhCb,SAAS,CAAC,UAAM,CACd,GAAMc,CAAAA,QAAQ,CAAGR,SAAS,CAACS,UAAV,CAAqB,OAArB,EAA8BC,GAA9B,CAAkCP,MAAlC,EACdM,UADc,CACH,SADG,EACQC,GADR,CACYL,EADZ,CAAjB,CAEAG,QAAQ,CAACG,GAAT,GAAeC,IAAf,CAAoB,SAACF,GAAD,QAASH,CAAAA,QAAQ,CAACN,OAAO,CAACS,GAAD,CAAR,CAAjB,EAApB,EACD,CAJQ,CAIN,CAACP,MAAD,CAASE,EAAT,CAJM,CAAT,CAMA,GAAMQ,CAAAA,YAAY,0FAAG,gJACbL,QADa,CACFR,SAAS,CAACS,UAAV,CAAqB,OAArB,EAA8BC,GAA9B,CAAkCP,MAAlC,EACdM,UADc,CACH,SADG,EACQC,GADR,CACYL,EADZ,CADE,uBAGbG,CAAAA,QAAQ,CAACM,MAAT,EAHa,QAInBV,OAAO,CAACW,MAAR,GAJmB,sDAAH,kBAAZF,CAAAA,YAAY,0CAAlB,CAOA,mBACE,oBAAC,OAAD,mBACE,oBAAC,SAAD,mBACE,oBAAC,UAAD,mBACE,oBAAC,UAAD,EAAY,IAAI,CAAC,OAAjB,eACE,oBAAC,aAAD,MADF,CADF,cAIE,oBAAC,QAAD,MAAWd,UAAU,CAACO,KAAD,SAACA,KAAD,iBAACA,KAAK,CAAEU,IAAR,CAArB,CAJF,cAKE,oBAAC,UAAD,EAAY,IAAI,CAAC,KAAjB,eACE,oBAAC,SAAD,EAAW,OAAO,CAAEH,YAApB,eACE,oBAAC,OAAD,EAAS,IAAI,CAAErB,SAAf,CAA0B,IAAI,CAAC,WAA/B,EADF,CADF,CALF,CADF,CADF,cAcE,oBAAC,UAAD,EAAY,SAAS,CAAC,aAAtB,eACE,8BAAKc,KAAL,SAAKA,KAAL,iBAAKA,KAAK,CAAEW,KAAZ,CADF,cAEE,2BAAK,GAAG,CAAEX,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEY,UAAjB,CAA6B,GAAG,CAAEZ,KAAF,SAAEA,KAAF,iBAAEA,KAAK,CAAEW,KAAzC,EAFF,cAGE,6BAAIX,KAAJ,SAAIA,KAAJ,iBAAIA,KAAK,CAAEa,WAAX,CAHF,CAdF,CADF,CAsBD,CAxCD,CA0CA,cAAejB,CAAAA,SAAf","sourcesContent":["import {\n  IonBackButton,\n  IonButton,\n  IonButtons,\n  IonContent,\n  IonHeader,\n  IonIcon,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n} from '@ionic/react';\nimport { trash as trashIcon } from 'ionicons/icons';\nimport React, { useEffect, useState } from 'react';\nimport { useHistory, useParams } from 'react-router';\nimport { useAuth } from '../auth';\nimport { formatDate } from '../date';\nimport { firestore } from '../firebase';\nimport { Entry, toEntry } from '../models';\n\ninterface RouteParams {\n  id: string;\n}\n\nconst EntryPage: React.FC = () => {\n  const { userId } = useAuth();\n  const history = useHistory();\n  const { id } = useParams<RouteParams>();\n  const [entry, setEntry] = useState<Entry>();\n  useEffect(() => {\n    const entryRef = firestore.collection('users').doc(userId)\n      .collection('entries').doc(id);\n    entryRef.get().then((doc) => setEntry(toEntry(doc)));\n  }, [userId, id]);\n\n  const handleDelete = async () => {\n    const entryRef = firestore.collection('users').doc(userId)\n      .collection('entries').doc(id);\n    await entryRef.delete();\n    history.goBack();\n  };\n\n  return (\n    <IonPage>\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonBackButton />\n          </IonButtons>\n          <IonTitle>{formatDate(entry?.date)}</IonTitle>\n          <IonButtons slot=\"end\">\n            <IonButton onClick={handleDelete}>\n              <IonIcon icon={trashIcon} slot=\"icon-only\" />\n            </IonButton>\n          </IonButtons>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent className=\"ion-padding\">\n        <h2>{entry?.title}</h2>\n        <img src={entry?.pictureUrl} alt={entry?.title} />\n        <p>{entry?.description}</p>\n      </IonContent>\n    </IonPage>\n  );\n};\n\nexport default EntryPage;\n"]},"metadata":{},"sourceType":"module"}